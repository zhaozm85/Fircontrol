ANSI-C/cC++ Compiler for HC08 V-5.0.32 Build 9279, Oct  7 2009

    1:  /**
    2:    ******************************************************************************
    3:    * proj    firmware startup project
    4:    * file    LTC6802.c
    5:    * ver     1.0
    6:    * brief   This is a LTC6802 file for all C files.
    7:    ------------------------------------------------------------------------------
    8:    * 2012.02 created by taoyu@bakai.com
    9:    */ 
   10:  
   11:  /* File Id -------------------------------------------------------------------*/
   12:  #define _LTC6802_C_ 0x52
   13:  #define FILE_No _LTC6802_C_
   14:  
   15:  /* Includes ------------------------------------------------------------------*/
   16:  #include  "ltc6802.h"  /* mandotary */
   17:  #include  "mcu.h"
   18:  
   19:  /* Private Macros & Defines --------------------------------------------------*/
   20:  
   21:  /* Private typedefs ----------------------------------------------------------*/
   22:  
   23:  typedef struct
   24:  {
   25:    unsigned char rxbuf[32];
   26:    unsigned char txbuf[16];
   27:    xfer_t  xfer;
   28:  }
   29:  ltc6802_t;
   30:  
   31:  /* Private consts ------------------------------------------------------------*/
   32:  
   33:  /* Private variables ---------------------------------------------------------*/
   34:  
   35:  static ltc6802_t  ltc6802;
   36:  
   37:  /* Private function prototypes -----------------------------------------------*/
   38:  
   39:  static unsigned char ltc6802_crc(
   40:    unsigned char len,
   41:    unsigned char * buf
   42:    );
   43:  
   44:  static int ltc6802_write(
   45:    unsigned char   da,
   46:    ltc6802_cmd_t   cmd,
   47:    unsigned char   len,
   48:    void * buf
   49:    );
   50:  
   51:  static int ltc6802_read(
   52:    unsigned char   da,
   53:    ltc6802_cmd_t   cmd,
   54:    unsigned char   len,
   55:    void * buf
   56:    );
   57:  
   58:  /* Global consts -------------------------------------------------------------*/
   59:  
   60:  /* Global variables ----------------------------------------------------------*/
   61:  
   62:  /* Functions -----------------------------------------------------------------*/
   63:  
   64:  /**
   65:    * bref    LTC6802 function
   66:    * param   none
   67:    * retval  none
   68:    */
   69:  
   70:  int ltc6802_init(void){

Function: ltc6802_init
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

   71:  
   72:    ltc6802.xfer.txbuf = ltc6802.txbuf;
  0000 450020   [3]             LDHX  @ltc6802:32
  0003 960031   [5]             STHX  ltc6802:49
   73:    ltc6802.xfer.rxbuf = ltc6802.rxbuf;
  0006 450000   [3]             LDHX  @ltc6802
  0009 960033   [5]             STHX  ltc6802:51
   74:  
   75:    /* init spi */
   76:    (void)spi_init();
  000c cd0000   [6]             JSR   spi_init
   77:    
   78:    /* enable ltc6802 */
   79:    (void)pin_low(PN_VS_ENA_A);
  000f ae09     [2]             LDX   #9
  0011 8c       [1]             CLRH  
  0012 cd0000   [6]             JSR   pin_low
   80:    (void)pin_low(PN_VS_ENA_B);
  0015 ae0b     [2]             LDX   #11
  0017 8c       [1]             CLRH  
  0018 cd0000   [6]             JSR   pin_low
   81:    return  1;
  001b ae01     [2]             LDX   #1
  001d 8c       [1]             CLRH  
   82:  
   83:  }
  001e 81       [6]             RTS   
   84:  
   85:  int ltc6802_reset(void){

Function: ltc6802_reset
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

   86:  
   87:    /* disable ltc6802 */
   88:    (void)pin_high(PN_VS_ENA_A);
  0000 ae09     [2]             LDX   #9
  0002 8c       [1]             CLRH  
  0003 cd0000   [6]             JSR   pin_high
   89:    (void)pin_high(PN_VS_ENA_B);
  0006 ae0b     [2]             LDX   #11
  0008 8c       [1]             CLRH  
  0009 cd0000   [6]             JSR   pin_high
   90:  
   91:    /* reset spi */
   92:    return  spi_reset();
  000c cc0000   [4]             JMP   spi_reset
   93:    
   94:  }
   95:  
   96:  int ltc6802_wrcfg(unsigned char da, ltc6802_cfgreg_t* cfg)
   97:  {

Function: ltc6802_wrcfg
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

  0000 89       [2]             PSHX  
  0001 8b       [2]             PSHH  
   98:    return ltc6802_write(da,LTC6802_CMD_WRCFG,sizeof(ltc6802_cfgreg_t),cfg);
  0002 87       [2]             PSHA  
  0003 ae01     [2]             LDX   #1
  0005 8c       [1]             CLRH  
  0006 89       [2]             PSHX  
  0007 8b       [2]             PSHH  
  0008 a606     [2]             LDA   #6
  000a 9efe04   [5]             LDHX  4,SP
  000d cd0000   [6]             JSR   ltc6802_write
   99:  }
  0010 a705     [2]             AIS   #5
  0012 81       [6]             RTS   
  100:  
  101:  int ltc6802_rdcfg(unsigned char da, ltc6802_cfgreg_t* cfg)
  102:  {

Function: ltc6802_rdcfg
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

  0000 89       [2]             PSHX  
  0001 8b       [2]             PSHH  
  103:    return ltc6802_read(da,LTC6802_CMD_RDCFG,sizeof(ltc6802_cfgreg_t),cfg);
  0002 87       [2]             PSHA  
  0003 ae02     [2]             LDX   #2
  0005 8c       [1]             CLRH  
  0006 89       [2]             PSHX  
  0007 8b       [2]             PSHH  
  0008 a606     [2]             LDA   #6
  000a 9efe04   [5]             LDHX  4,SP
  000d cd0000   [6]             JSR   ltc6802_read
  104:  }
  0010 a705     [2]             AIS   #5
  0012 81       [6]             RTS   
  105:  
  106:  int ltc6802_rdflg(unsigned char da, ltc6802_flgreg_t* flg)
  107:  {

Function: ltc6802_rdflg
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

  0000 89       [2]             PSHX  
  0001 8b       [2]             PSHH  
  108:    return ltc6802_read(da,LTC6802_CMD_RDFLG,sizeof(ltc6802_flgreg_t),flg);
  0002 87       [2]             PSHA  
  0003 ae06     [2]             LDX   #6
  0005 8c       [1]             CLRH  
  0006 89       [2]             PSHX  
  0007 8b       [2]             PSHH  
  0008 a603     [2]             LDA   #3
  000a 9efe04   [5]             LDHX  4,SP
  000d cd0000   [6]             JSR   ltc6802_read
  109:  }
  0010 a705     [2]             AIS   #5
  0012 81       [6]             RTS   
  110:  
  111:  int ltc6802_stad(unsigned char da, ltc6802_cmd_t cmd)  //  cvad, cvdc, owad, owdc, tmpad
  112:  {

Function: ltc6802_stad
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

  0000 87       [2]             PSHA  
  0001 89       [2]             PSHX  
  0002 8b       [2]             PSHH  
  113:    switch(cmd){
  0003 9efe01   [5]             LDHX  1,SP
  0006 8b       [2]             PSHH  
  0007 86       [3]             PULA  
  0008 cd0000   [6]             JSR   _Search_Table_8_Offset
  000b 70               DC.B  112
  000c 1d               DC.B  L2A
  000d 10               DC.B  16
  000e 08               DC.B  L17
  000f 20               DC.B  32
  0010 06               DC.B  L17
  0011 30               DC.B  48
  0012 04               DC.B  L17
  0013 60               DC.B  96
  0014 02               DC.B  L17
  0015 70               DC.B  112
  0016 00               DC.B  L17
  0017          L17:    
  114:      case  LTC6802_CMD_STCVAD:
  115:      case  LTC6802_CMD_STCVDC:
  116:      case  LTC6802_CMD_STOWAD:
  117:      case  LTC6802_CMD_STOWDC:
  118:      case  LTC6802_CMD_STTMPAD:
  119:        return ltc6802_write(da,cmd,0,NULL);
  0017 95       [2]             TSX   
  0018 e602     [3]             LDA   2,X
  001a 87       [2]             PSHA  
  001b 9efe02   [5]             LDHX  2,SP
  001e 89       [2]             PSHX  
  001f 8b       [2]             PSHH  
  0020 4f       [1]             CLRA  
  0021 5f       [1]             CLRX  
  0022 8c       [1]             CLRH  
  0023 cd0000   [6]             JSR   ltc6802_write
  0026 a703     [2]             AIS   #3
  0028 201e     [3]             BRA   L48 ;abs = 0048
  002a          L2A:    
  120:      default:
  121:        PERRNO(ERRNO_INVALID_PARAMETERS,cmd);
  002a ae01     [2]             LDX   #1
  002c 8c       [1]             CLRH  
  002d 89       [2]             PSHX  
  002e 8b       [2]             PSHH  
  002f ae52     [2]             LDX   #82
  0031 89       [2]             PSHX  
  0032 8b       [2]             PSHH  
  0033 450000   [3]             LDHX  @"C:\Users\Administrator\Desktop\Fms\FMS\\260\302\314\25110V3T\05 Devices\ltc6802.c"
  0036 89       [2]             PSHX  
  0037 8b       [2]             PSHH  
  0038 ae79     [2]             LDX   #121
  003a 8c       [1]             CLRH  
  003b 89       [2]             PSHX  
  003c 8b       [2]             PSHH  
  003d 9efe09   [5]             LDHX  9,SP
  0040 cd0000   [6]             JSR   perrno
  0043 a708     [2]             AIS   #8
  122:        return NG;
  0045 45fffe   [3]             LDHX  #-2
  0048          L48:    
  123:    }
  124:  }
  0048 a703     [2]             AIS   #3
  004a 81       [6]             RTS   
  125:  
  126:  int ltc6802_rdcv(unsigned char da, ltc6802_cvreg_t* cv)
  127:  {

Function: ltc6802_rdcv
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

  0000 89       [2]             PSHX  
  0001 8b       [2]             PSHH  
  128:    return ltc6802_read(da,LTC6802_CMD_RDCV,sizeof(ltc6802_cvreg_t),cv);
  0002 87       [2]             PSHA  
  0003 ae04     [2]             LDX   #4
  0005 8c       [1]             CLRH  
  0006 89       [2]             PSHX  
  0007 8b       [2]             PSHH  
  0008 a612     [2]             LDA   #18
  000a 9efe04   [5]             LDHX  4,SP
  000d cd0000   [6]             JSR   ltc6802_read
  129:  }
  0010 a705     [2]             AIS   #5
  0012 81       [6]             RTS   
  130:  
  131:  int ltc6802_rdtmp(unsigned char da, ltc6802_tmpreg_t* tmp)
  132:  {

Function: ltc6802_rdtmp
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

  0000 89       [2]             PSHX  
  0001 8b       [2]             PSHH  
  133:    return ltc6802_read(da,LTC6802_CMD_RDTMP,sizeof(ltc6802_tmpreg_t),tmp);
  0002 87       [2]             PSHA  
  0003 ae08     [2]             LDX   #8
  0005 8c       [1]             CLRH  
  0006 89       [2]             PSHX  
  0007 8b       [2]             PSHH  
  0008 a605     [2]             LDA   #5
  000a 9efe04   [5]             LDHX  4,SP
  000d cd0000   [6]             JSR   ltc6802_read
  134:  }
  0010 a705     [2]             AIS   #5
  0012 81       [6]             RTS   
  135:  
  136:  int ltc6802_poll(unsigned char da, ltc6802_cmd_t cmd)  //  adc, int
  137:  {

Function: ltc6802_poll
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

  0000 89       [2]             PSHX  
  0001 8b       [2]             PSHH  
  138:    switch(cmd){
  0002 650040   [3]             CPHX  #64
  0005 2705     [3]             BEQ   LC ;abs = 000c
  0007 650050   [3]             CPHX  #80
  000a 2610     [3]             BNE   L1C ;abs = 001c
  000c          LC:     
  139:      case  LTC6802_CMD_PLADC:
  140:      case  LTC6802_CMD_PLINT:
  141:        return ltc6802_write(da,cmd,0,NULL);
  000c 87       [2]             PSHA  
  000d 9efe02   [5]             LDHX  2,SP
  0010 89       [2]             PSHX  
  0011 8b       [2]             PSHH  
  0012 4f       [1]             CLRA  
  0013 5f       [1]             CLRX  
  0014 8c       [1]             CLRH  
  0015 cd0000   [6]             JSR   ltc6802_write
  0018 a703     [2]             AIS   #3
  001a 201e     [3]             BRA   L3A ;abs = 003a
  001c          L1C:    
  142:        break;
  143:      default:
  144:        PERRNO(ERRNO_INVALID_PARAMETERS,cmd);
  001c ae01     [2]             LDX   #1
  001e 8c       [1]             CLRH  
  001f 89       [2]             PSHX  
  0020 8b       [2]             PSHH  
  0021 ae52     [2]             LDX   #82
  0023 89       [2]             PSHX  
  0024 8b       [2]             PSHH  
  0025 450000   [3]             LDHX  @"C:\Users\Administrator\Desktop\Fms\FMS\\260\302\314\25110V3T\05 Devices\ltc6802.c"
  0028 89       [2]             PSHX  
  0029 8b       [2]             PSHH  
  002a ae90     [2]             LDX   #-112
  002c 8c       [1]             CLRH  
  002d 89       [2]             PSHX  
  002e 8b       [2]             PSHH  
  002f 9efe09   [5]             LDHX  9,SP
  0032 cd0000   [6]             JSR   perrno
  0035 a708     [2]             AIS   #8
  145:        return NG;
  0037 45fffe   [3]             LDHX  #-2
  003a          L3A:    
  146:    }
  147:  }
  003a a702     [2]             AIS   #2
  003c 81       [6]             RTS   
  148:  
  149:  static int ltc6802_write(
  150:    unsigned char   da,
  151:    ltc6802_cmd_t   cmd,
  152:    unsigned char   len,
  153:    void * buf){

Function: ltc6802_write
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

  0000 87       [2]             PSHA  
  0001 89       [2]             PSHX  
  0002 8b       [2]             PSHH  
  0003 8b       [2]             PSHH  
  154:  
  155:    int res;
  156:  
  157:    ltc6802.xfer.txbuf[0] = 0x80|da;
  0004 95       [2]             TSX   
  0005 e608     [3]             LDA   8,X
  0007 aa80     [2]             ORA   #-128
  0009 320031   [5]             LDHX  ltc6802:49
  000c f7       [2]             STA   ,X
  158:    ltc6802.xfer.txbuf[1] = (unsigned char)cmd;
  000d 320031   [5]             LDHX  ltc6802:49
  0010 9ee608   [4]             LDA   8,SP
  0013 e701     [3]             STA   1,X
  159:    (void)memcpy(&ltc6802.xfer.txbuf[2],buf,len);
  0015 320031   [5]             LDHX  ltc6802:49
  0018 af02     [2]             AIX   #2
  001a 89       [2]             PSHX  
  001b 8b       [2]             PSHH  
  001c 9efe04   [5]             LDHX  4,SP
  001f 89       [2]             PSHX  
  0020 8b       [2]             PSHH  
  0021 95       [2]             TSX   
  0022 ee07     [3]             LDX   7,X
  0024 9eef05   [4]             STX   5,SP
  0027 8c       [1]             CLRH  
  0028 cd0000   [6]             JSR   memcpy
  002b a704     [2]             AIS   #4
  160:    ltc6802.xfer.txcnt = 2+len;
  002d 8c       [1]             CLRH  
  002e 9eee01   [4]             LDX   1,SP
  0031 af02     [2]             AIX   #2
  0033 960035   [5]             STHX  ltc6802:53
  161:    ltc6802.xfer.rxmax = 0;
  0036 5f       [1]             CLRX  
  0037 8c       [1]             CLRH  
  0038 960037   [5]             STHX  ltc6802:55
  162:  
  163:    res = spi_xfer(&ltc6802.xfer);
  003b 450030   [3]             LDHX  @ltc6802:48
  003e cd0000   [6]             JSR   spi_xfer
  164:    
  165:    return res;
  166:  
  167:  }
  0041 a704     [2]             AIS   #4
  0043 81       [6]             RTS   
  168:  
  169:  static int ltc6802_read(
  170:    unsigned char   da,
  171:    ltc6802_cmd_t   cmd,
  172:    unsigned char   len,
  173:    void * buf)
  174:  {

Function: ltc6802_read
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

  0000 87       [2]             PSHA  
  0001 89       [2]             PSHX  
  0002 8b       [2]             PSHH  
  0003 a7fe     [2]             AIS   #-2
  175:  
  176:    unsigned char crc;
  177:    int res;
  178:    
  179:    ltc6802.xfer.txbuf[0] = 0x80|da;
  0005 95       [2]             TSX   
  0006 e609     [3]             LDA   9,X
  0008 aa80     [2]             ORA   #-128
  000a 320031   [5]             LDHX  ltc6802:49
  000d f7       [2]             STA   ,X
  180:    ltc6802.xfer.txbuf[1] = (unsigned char)cmd;
  000e 320031   [5]             LDHX  ltc6802:49
  0011 9ee609   [4]             LDA   9,SP
  0014 e701     [3]             STA   1,X
  181:    ltc6802.xfer.txcnt = 2;
  0016 ae02     [2]             LDX   #2
  0018 8c       [1]             CLRH  
  0019 960035   [5]             STHX  ltc6802:53
  182:    ltc6802.xfer.rxmax = len+1;
  001c 9ee605   [4]             LDA   5,SP
  001f 97       [1]             TAX   
  0020 af01     [2]             AIX   #1
  0022 960037   [5]             STHX  ltc6802:55
  183:  
  184:    res = spi_xfer(&ltc6802.xfer);
  0025 450030   [3]             LDHX  @ltc6802:48
  0028 9ee701   [4]             STA   1,SP
  002b cd0000   [6]             JSR   spi_xfer
  185:  
  186:    crc = ltc6802_crc(len+1,ltc6802.xfer.rxbuf);
  002e 95       [2]             TSX   
  002f e604     [3]             LDA   4,X
  0031 4c       [1]             INCA  
  0032 320033   [5]             LDHX  ltc6802:51
  0035 cd0000   [6]             JSR   ltc6802_crc
  0038 95       [2]             TSX   
  0039 e701     [3]             STA   1,X
  187:    /* ok */
  188:    if( crc==0 ){
  003b 2618     [3]             BNE   L55 ;abs = 0055
  189:      (void)memcpy(buf,ltc6802.xfer.rxbuf,len);
  003d 9efe03   [5]             LDHX  3,SP
  0040 89       [2]             PSHX  
  0041 8b       [2]             PSHH  
  0042 320033   [5]             LDHX  ltc6802:51
  0045 89       [2]             PSHX  
  0046 8b       [2]             PSHH  
  0047 95       [2]             TSX   
  0048 ee04     [3]             LDX   4,X
  004a 8c       [1]             CLRH  
  004b cd0000   [6]             JSR   memcpy
  004e a704     [2]             AIS   #4
  190:      return OK;
  0050 ae01     [2]             LDX   #1
  0052 8c       [1]             CLRH  
  0053 201f     [3]             BRA   L74 ;abs = 0074
  0055          L55:    
  191:    }
  192:    /* error */
  193:    PERRNO(ERRNO_LTC6802_CRC_ERROR,crc);
  0055 a602     [2]             LDA   #2
  0057 87       [2]             PSHA  
  0058 4f       [1]             CLRA  
  0059 87       [2]             PSHA  
  005a ae52     [2]             LDX   #82
  005c 8c       [1]             CLRH  
  005d 89       [2]             PSHX  
  005e 8b       [2]             PSHH  
  005f 450000   [3]             LDHX  @"C:\Users\Administrator\Desktop\Fms\FMS\\260\302\314\25110V3T\05 Devices\ltc6802.c"
  0062 89       [2]             PSHX  
  0063 8b       [2]             PSHH  
  0064 aec1     [2]             LDX   #-63
  0066 8c       [1]             CLRH  
  0067 89       [2]             PSHX  
  0068 8b       [2]             PSHH  
  0069 9eee0a   [4]             LDX   10,SP
  006c cd0000   [6]             JSR   perrno
  006f a708     [2]             AIS   #8
  194:    return NG;
  0071 45fffe   [3]             LDHX  #-2
  0074          L74:    
  195:  
  196:  }
  0074 a705     [2]             AIS   #5
  0076 81       [6]             RTS   
  197:  
  198:  static unsigned char ltc6802_crc(
  199:    unsigned char len,
  200:    unsigned char * buf
  201:    )
  202:  {

Function: ltc6802_crc
Source  : C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices\ltc6802.c
Options : -AddIncl../preinc.h -Cs08 -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\src;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\lib;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\src;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\06 Platform;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\04 Modules;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\Sources;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\07 Application;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\05 Devices;C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"LIBPATH=D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\hc08c\device\asm_include;D:\Program Files\Freescale\CodeWarrior for Microcontrollers V6.3\lib\HC08c\include" -Env"OBJPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Env"TEXTPATH=C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Administrator\Desktop\Fms\FMS\°ÂÌ©10V3T\02 CodeWarrior\mc9s08dz60_Data\Standard\ObjectCode\ltc6802.c.o" -WmsgSd1106

  0000 87       [2]             PSHA  
  0001 89       [2]             PSHX  
  0002 8b       [2]             PSHH  
  0003 a7fa     [2]             AIS   #-6
  203:  
  204:    unsigned char i,j;
  205:    unsigned long d;  /* lower 17 bits only used */
  206:  
  207:  	d = buf[0];
  0005 f6       [3]             LDA   ,X
  0006 8c       [1]             CLRH  
  0007 97       [1]             TAX   
  0008 9eff03   [5]             STHX  3,SP
  000b 5f       [1]             CLRX  
  000c 9eff01   [5]             STHX  1,SP
  208:  	d <<= 8;
  000f 95       [2]             TSX   
  0010 a608     [2]             LDA   #8
  0012 cd0000   [6]             JSR   _LLSL
  0015 cd0000   [6]             JSR   _POP32
  209:  
  210:  	for (i = 1; i <= len; i++) {  //  each byte
  0018 a601     [2]             LDA   #1
  001a 95       [2]             TSX   
  001b e704     [3]             STA   4,X
  001d 2052     [3]             BRA   L71 ;abs = 0071
  001f          L1F:    
  211:  	  if (i != len) d |= buf[i];
  001f e608     [3]             LDA   8,X
  0021 e104     [3]             CMP   4,X
  0023 2726     [3]             BEQ   L4B ;abs = 004b
  0025 e604     [3]             LDA   4,X
  0027 eb07     [3]             ADD   7,X
  0029 87       [2]             PSHA  
  002a 4f       [1]             CLRA  
  002b e906     [3]             ADC   6,X
  002d 87       [2]             PSHA  
  002e 8a       [3]             PULH  
  002f 88       [3]             PULX  
  0030 fe       [3]             LDX   ,X
  0031 4f       [1]             CLRA  
  0032 89       [2]             PSHX  
  0033 87       [2]             PSHA  
  0034 87       [2]             PSHA  
  0035 87       [2]             PSHA  
  0036 95       [2]             TSX   
  0037 89       [2]             PSHX  
  0038 8b       [2]             PSHH  
  0039 af04     [2]             AIX   #4
  003b 89       [2]             PSHX  
  003c 8b       [2]             PSHH  
  003d 9efe03   [5]             LDHX  3,SP
  0040 cd0000   [6]             JSR   _LOR
  0043 95       [2]             TSX   
  0044 af0a     [2]             AIX   #10
  0046 cd0000   [6]             JSR   _POP32
  0049 a706     [2]             AIS   #6
  004b          L4B:    
  212:  		for (j = 0; j < 8; j++) {   //  one byte
  004b 95       [2]             TSX   
  004c 6f05     [5]             CLR   5,X
  004e          L4E:    
  213:  		  if (d & 0x010000) //  msb == 1
  004e e601     [3]             LDA   1,X
  0050 a501     [2]             BIT   #1
  0052 270c     [3]             BEQ   L60 ;abs = 0060
  214:  		    d ^= 0x010700;  //  poly
  0054 e602     [3]             LDA   2,X
  0056 a807     [2]             EOR   #7
  0058 e702     [3]             STA   2,X
  005a e601     [3]             LDA   1,X
  005c a801     [2]             EOR   #1
  005e e701     [3]             STA   1,X
  0060          L60:    
  215:  		  d <<= 1;
  0060 6803     [5]             LSL   3,X
  0062 6902     [5]             ROL   2,X
  0064 6901     [5]             ROL   1,X
  0066 79       [4]             ROL   ,X
  0067 6c05     [5]             INC   5,X
  0069 e605     [3]             LDA   5,X
  006b a108     [2]             CMP   #8
  006d 25df     [3]             BCS   L4E ;abs = 004e
  006f 6c04     [5]             INC   4,X
  0071          L71:    
  0071 e608     [3]             LDA   8,X
  0073 e104     [3]             CMP   4,X
  0075 24a8     [3]             BCC   L1F ;abs = 001f
  216:  		}
  217:  	}
  218:  
  219:  	return (unsigned char)(d>>8);
  0077 e602     [3]             LDA   2,X
  220:  
  221:  }
  0079 a709     [2]             AIS   #9
  007b 81       [6]             RTS   
  222:  
